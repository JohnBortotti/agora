var total_supply: int := 50;

let transfer = \from: string -> \to: string -> \amount: int ->
  let from_balance = get_balance from in
  let to_balance = get_balance to in

  if (from_balance >= amount) then 
    balances[from] := from_balance - amount;
    balances[from] := to_balance + amount;
    emit 
  else 
    error "Insufficient funds"
in

let get_balance = \addr: string -> balances[addr] in

publish ([transfer;get_balance])
